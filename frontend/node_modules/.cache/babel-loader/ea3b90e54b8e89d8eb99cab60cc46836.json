{"ast":null,"code":"var _jsxFileName = \"/Users/darius/Desktop/orbital2020/frontend/src/components/Visual/barR.js\";\nimport React from 'react';\nimport { HorizontalBar } from 'react-chartjs-2';\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport { connect } from 'react-redux';\naxios.defaults.baseURL = 'http://127.0.0.1:8000/';\nexport class BarGraph2 extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      expense: []\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => axios.get('api/').then(res => {\n      const new_res = res.data.filter(x => x.username === localStorage.getItem(\"username\"));\n      this.setState({\n        expense: new_res\n      });\n    }), 200);\n  }\n\n  render() {\n    // const xlabels = []\n    //   const y = this.props.data\n    //   .filter(item => item.amount > 0).map(x => xlabels.push(x.name))\n    //   const ylabels = []\n    //   const z = this.props.data\n    //   .map(transaction => transaction.amount)\n    //   .map(num => parseFloat(num))\n    //   .filter(item => item > 0).map(y => ylabels.push(y))\n    var grouping = {};\n    this.props.data.filter(item => item.amount > 0).map(x => {\n      if (x.name in grouping) {\n        grouping[x.name] += parseFloat(x.amount);\n      } else {\n        grouping[x.name] = parseFloat(x.amount);\n      }\n    });\n    const xlabels = Object.keys(grouping).sort();\n    var ylabels = [];\n\n    for (let x of xlabels) {\n      ylabels.push(grouping[x]);\n    }\n\n    const data = {\n      labels: xlabels,\n      datasets: [{\n        label: 'Revenue Breakdown',\n        backgroundColor: 'rgba(71, 181, 209, 0.84)',\n        borderColor: 'rgba(71, 181, 209, 0.84)',\n        borderWidth: 1,\n        hoverBackgroundColor: 'rgba(255,99,132,0.4)',\n        hoverBorderColor: 'rgba(255,99,132,1)',\n        data: ylabels\n      }]\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"text2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }\n    }, \" Revenue Breakdown\"), /*#__PURE__*/React.createElement(HorizontalBar, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      to: \"/Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"Btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, \"More\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.token\n  };\n};\n\nexport default connect(mapStateToProps)(BarGraph2);","map":{"version":3,"sources":["/Users/darius/Desktop/orbital2020/frontend/src/components/Visual/barR.js"],"names":["React","HorizontalBar","Link","axios","connect","defaults","baseURL","BarGraph2","Component","state","expense","componentDidMount","setTimeout","get","then","res","new_res","data","filter","x","username","localStorage","getItem","setState","render","grouping","props","item","amount","map","name","parseFloat","xlabels","Object","keys","sort","ylabels","push","labels","datasets","label","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","mapStateToProps","token"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {HorizontalBar} from 'react-chartjs-2';\nimport {Link } from \"react-router-dom\"; \nimport axios from 'axios';\nimport { connect } from 'react-redux';\n\naxios.defaults.baseURL = 'http://127.0.0.1:8000/';\n\nexport class BarGraph2 extends React.Component  { \n\n  state = {\n    expense: []\n}\n\n\ncomponentDidMount() {\n    setTimeout(() => \n      axios.get('api/')\n      .then(res => {\n          const new_res = res.data.filter(x => x.username === localStorage.getItem(\"username\"));\n          this.setState({\n              expense: new_res\n          });\n      }), 200);\n  }\n\n  render () {\n  \n  \n  // const xlabels = []\n  //   const y = this.props.data\n  //   .filter(item => item.amount > 0).map(x => xlabels.push(x.name))\n  //   const ylabels = []\n  //   const z = this.props.data\n  //   .map(transaction => transaction.amount)\n  //   .map(num => parseFloat(num))\n  //   .filter(item => item > 0).map(y => ylabels.push(y))\n\n    var grouping = {};\n    this.props.data.filter(item => item.amount > 0).map(x => {\n      if (x.name in grouping) {\n        grouping[x.name] += parseFloat(x.amount)\n      } else {\n        grouping[x.name] = parseFloat(x.amount)\n      }\n    })\n    const xlabels = Object.keys(grouping).sort()\n    var ylabels = []\n    for (let x of xlabels) {\n      ylabels.push(grouping[x])\n    }\n\n    const data = {\n        labels: xlabels,\n        datasets: [\n          {\n            label: 'Revenue Breakdown',\n            backgroundColor: 'rgba(71, 181, 209, 0.84)',\n            borderColor: 'rgba(71, 181, 209, 0.84)',\n            borderWidth: 1,\n            hoverBackgroundColor: 'rgba(255,99,132,0.4)',\n            hoverBorderColor: 'rgba(255,99,132,1)',\n            data: ylabels\n          }\n        ]\n      };\nreturn (\n  <div>\n    <h2 className='text2'> Revenue Breakdown</h2>\n    <HorizontalBar data={data}/>\n    <Link to=\"/Login\">\n            <button className=\"Btn\">\n              More\n            </button>\n            </Link>\n  </div>\n   \n)\n}\n}\n\nconst mapStateToProps = state => {\n  return {\n      token: state.token\n  }\n}\n\nexport default connect(mapStateToProps)(BarGraph2);\n\n\n"]},"metadata":{},"sourceType":"module"}