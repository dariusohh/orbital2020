{"ast":null,"code":"var _jsxFileName = \"/Users/darius/Desktop/orbital2020/frontend/src/components/Profile/predict.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Chart from \"react-apexcharts\";\naxios.defaults.baseURL = 'http://127.0.0.1:8000/';\nexport class Prediction extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      predict: []\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => axios.get('api/').then(res => {\n      var new_res = res.data.filter(x => x.username === localStorage.getItem(\"username\"));\n      this.setState({\n        expense: new_res\n      });\n      axios.post('predict/', new_res).then(res => {\n        this.setState({\n          prediction: res.data\n        });\n      });\n    }), 200);\n  }\n\n  render() {\n    const month_profit = {};\n\n    for (var j = 5; j >= 0; j--) {\n      var mthyeardate = new Date(new Date().getFullYear(), new Date().getMonth() - j);\n      var mthyear = mthyeardate.toLocaleDateString().slice(3, 6) + mthyeardate.toLocaleDateString().slice(8, 10);\n      month_profit[mthyear] = 0;\n    }\n\n    for (var k = 1; k < 6; k++) {\n      mthyeardate = new Date(new Date().getFullYear(), new Date().getMonth() + k);\n      mthyear = mthyeardate.toLocaleDateString().slice(3, 6) + mthyeardate.toLocaleDateString().slice(8, 10);\n      month_profit[mthyear] = 0;\n    }\n\n    var month_predictions = {};\n    Object.assign(month_predictions, month_profit);\n    this.props.prediction.revenue_pred.forEach(x => {\n      const objyear = x.date.substring(2, 4);\n      const objmth = x.date.substring(5, 7);\n      month_predictions[objmth + \"/\" + objyear] = x.value;\n    });\n    this.props.prediction.expense_pred.forEach(x => {\n      const objyear = x.date.substring(2, 4);\n      const objmth = x.date.substring(5, 7);\n      month_predictions[objmth + \"/\" + objyear] += x.value;\n    });\n    this.props.data.forEach(x => {\n      const objyear = x.created_at.substring(0, 4);\n      const objmth = x.created_at.substring(5, 7) - 1;\n      const objday = x.created_at.substring(8, 10);\n      const objhour = parseInt(x.created_at.substring(11, 13)) + 8;\n      const objmin = x.created_at.substring(14, 16);\n      const objsec = x.created_at.substring(17, 19);\n      const createddate = new Date(objyear, objmth, objday, objhour, objmin, objsec);\n      const created = createddate.toLocaleDateString().slice(3, 6) + createddate.toLocaleDateString().slice(8, 10);\n      month_profit[created] += parseFloat(x.amount);\n    });\n    const mth_xlabels = Object.keys(month_profit);\n    var mthprofit_label = [];\n    var pred_label = [];\n\n    for (let x of mth_xlabels) {\n      mthprofit_label.push(month_profit[x].toFixed(2));\n      pred_label.push(month_predictions[x].toFixed(2));\n    }\n\n    const series = [{\n      name: 'Actual',\n      type: 'column',\n      data: mthprofit_label\n    }, {\n      name: 'Predict',\n      type: 'line',\n      data: pred_label\n    }];\n    const options = {\n      colors: [\"rgb(0,191,255)\", \"rgb(139,0,139)\"],\n      chart: {\n        width: '100%'\n      },\n      stroke: {\n        width: [0, 4]\n      },\n      dataLabels: {\n        enabled: true,\n        enabledOnSeries: [1]\n      },\n      labels: mth_xlabels,\n      xaxis: {\n        type: 'datetime'\n      }\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      options: options,\n      series: series,\n      type: \"line\",\n      height: 350,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\nexport default Prediction;","map":{"version":3,"sources":["/Users/darius/Desktop/orbital2020/frontend/src/components/Profile/predict.js"],"names":["React","axios","Chart","defaults","baseURL","Prediction","Component","state","predict","componentDidMount","setTimeout","get","then","res","new_res","data","filter","x","username","localStorage","getItem","setState","expense","post","prediction","render","month_profit","j","mthyeardate","Date","getFullYear","getMonth","mthyear","toLocaleDateString","slice","k","month_predictions","Object","assign","props","revenue_pred","forEach","objyear","date","substring","objmth","value","expense_pred","created_at","objday","objhour","parseInt","objmin","objsec","createddate","created","parseFloat","amount","mth_xlabels","keys","mthprofit_label","pred_label","push","toFixed","series","name","type","options","colors","chart","width","stroke","dataLabels","enabled","enabledOnSeries","labels","xaxis"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Chart from \"react-apexcharts\";\naxios.defaults.baseURL = 'http://127.0.0.1:8000/';\n\nexport class Prediction extends React.Component {\n        \nstate = {\n    predict:[]\n}\n\ncomponentDidMount() {\n    setTimeout(() => \n      axios.get('api/')\n      .then(res => {\n          var new_res = res.data.filter(x => x.username === localStorage.getItem(\"username\"))\n          this.setState({\n              expense: new_res\n          });\n          axios.post('predict/',new_res).then(res => {\n              this.setState({prediction:res.data})\n          })\n      }), 200);\n  }\n\nrender() {\n\n  const month_profit = {}\n  for (var j = 5; j >= 0; j--) {\n    var mthyeardate = new Date(new Date().getFullYear(),new Date().getMonth() - j)\n    var mthyear = mthyeardate.toLocaleDateString().slice(3,6) + mthyeardate.toLocaleDateString().slice(8,10)\n    month_profit[mthyear] = 0\n  }\n\n  for (var k = 1; k < 6; k++) {\n    mthyeardate = new Date(new Date().getFullYear(),new Date().getMonth() + k)\n    mthyear = mthyeardate.toLocaleDateString().slice(3,6) + mthyeardate.toLocaleDateString().slice(8,10)\n    month_profit[mthyear] = 0\n  }\n\n  var month_predictions = {};\n  Object.assign(month_predictions,month_profit);\n  this.props.prediction.revenue_pred.forEach(x => {\n    const objyear = x.date.substring(2,4)\n    const objmth = x.date.substring(5,7)\n    month_predictions[objmth + \"/\" + objyear] = x.value\n  })\n\n  this.props.prediction.expense_pred.forEach(x => {\n    const objyear = x.date.substring(2,4)\n    const objmth = x.date.substring(5,7)\n    month_predictions[objmth + \"/\" + objyear] += x.value\n  })\n\n  this.props.data.forEach(x => {\n    const objyear = x.created_at.substring(0,4)\n    const objmth = x.created_at.substring(5,7) - 1\n    const objday = x.created_at.substring(8,10)\n    const objhour = parseInt(x.created_at.substring(11,13)) + 8\n    const objmin = x.created_at.substring(14,16)\n    const objsec = x.created_at.substring(17,19)\n    const createddate = new Date(objyear,objmth,objday, objhour, objmin, objsec)\n    const created = createddate.toLocaleDateString().slice(3,6) + createddate.toLocaleDateString().slice(8,10)\n    month_profit[created] += parseFloat(x.amount)\n  })\n\n  const mth_xlabels = Object.keys(month_profit)\n  var mthprofit_label = []\n  var pred_label = []\n  for (let x of mth_xlabels) {\n    mthprofit_label.push(month_profit[x].toFixed(2))\n    pred_label.push(month_predictions[x].toFixed(2))\n  }\n\nconst series = [{\n    name: 'Actual',\n    type: 'column',\n    data: mthprofit_label\n  }, {\n    name: 'Predict',\n    type: 'line',\n    data: pred_label\n  }]\n\nconst options = {\n    colors:[\"rgb(0,191,255)\",\"rgb(139,0,139)\"],\n    chart: {\n      width: '100%'\n    },\n    stroke: {\n      width: [0, 4],\n    },\n    dataLabels: {\n      enabled: true,\n      enabledOnSeries: [1],\n    },\n    labels: mth_xlabels,\n    xaxis: {\n      type: 'datetime'\n    }\n}\n\n    return (\n        <>\n    \n        <div id=\"chart\">\n        <Chart options={options} series={series} type=\"line\" height={350} />\n      </div>\n      </>\n    )\n}\n\n}\n\n\nexport default Prediction;"]},"metadata":{},"sourceType":"module"}